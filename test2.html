<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Scythe Demo</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3"
      crossorigin="anonymous"
    />
    <link
      href="https://cdn.jsdelivr.net/npm/dc@4.2.7/dist/style/dc.css"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bulma@0.9.4/css/bulma.min.css"
    />
    <link rel="stylesheet" href="main.css" />
    <script
      src="https://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.js"
      type="text/javascript"
    ></script>
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <script
      type="text/javascript"
      src="https://cdnjs.cloudflare.com/ajax/libs/crossfilter/1.3.12/crossfilter.min.js"
    ></script>
    <script
      type="text/javascript"
      src="https://cdn.jsdelivr.net/npm/dc@4.2.7/dist/dc.min.js"
    ></script>
    <script
      type="text/javascript"
      src="https://cdn.jsdelivr.net/npm/lodash@4.17.21/lodash.min.js"
    ></script>
  </head>
  <body>
    <div class="grid-container">
      <div class="grid-item logo-area">
        <img class="logo" src="./scythesmall.jpg" alt="Scythe Graph Library" />
      </div>
      <div class="grid-item head-text">
        <h1>ScatterPlot Test</h1>
      </div>
    </div>
    <div id="my-bar"></div>
    <div id="my-chart"></div>

    <script type="text/javascript">
      function print_filter(filter) {
        let f = eval(filter);
        if (typeof f.length != "undefined") {
        } else {
        }
        if (typeof f.top != "undefined") {
          f = f.top(Infinity);
        } else {
        }
        if (typeof f.dimension != "undefined") {
          f = f
            .dimension(function (d) {
              return "";
            })
            .top(Infinity);
        } else {
        }
        console.log(
          filter +
            "(" +
            f.length +
            ") = " +
            JSON.stringify(f)
              .replace("[", "[\n\t")
              .replace(/}\,/g, "},\n\t")
              .replace("]", "\n]")
        );
      }

      var data = [
        { date: new Date("2022-01-01"), x: 3, y: 10 },
        { date: new Date("2022-02-01"), x: 4, y: 20 },
        { date: new Date("2022-02-01"), x: 4, y: 30 },
        { date: new Date("2022-03-01"), x: 6, y: 15 },
        { date: new Date("2022-04-01"), x: 7, y: 20 },
      ];

      var ndx = crossfilter(data);
      var xDimension = ndx.dimension(function (d) {
        return [+d.x, +d.y];
      });

      var xGroup = xDimension.group();

      console.log("xDimension:");
      print_filter(xDimension);
      console.log("xGroup:");
      print_filter(xGroup);

      console.log("Building chart...");

      // var bchart = dc
      //   .barChart("#my-bar")
      //   .width(500)
      //   .height(300)
      //   .dimension(xDimension)
      //   .group(valueGroup)
      //   .x(d3.scaleOrdinal().domain([1, 9]))
      //   .xUnits(() => 10)
      //   .brushOn(false)
      //   .xAxisLabel("Date")
      //   .yAxisLabel("Value");

      var schart = dc
        .scatterPlot("#my-chart")
        .width(300)
        .height(300)
        .dimension(xDimension)
        .group(xGroup)
        .x(d3.scaleLinear().domain([1, 10]))
        .brushOn(false)
        .symbolSize(8)
        .clipPadding(10)
        .xAxisLabel("X")
        .yAxisLabel("Y");
      schart.render();
    </script>
  </body>
</html>
